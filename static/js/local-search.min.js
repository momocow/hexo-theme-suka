/*!
 * Hexo Theme Suka | local-search.js
 * Author: SukkaW
 * Link: https://github.com/SukkaW/hexo-theme-suka
 * License: GPL-3.0
 */
String.prototype.queryUrl=function(e){var t={};return this.replace(/^[^?=]*\?/gi,"").split("#")[0].replace(/(^|&)([^&=]+)=([^&]*)/g,function(e,r,n,a){try{n=decodeURIComponent(n)}catch(e){}try{a=decodeURIComponent(a)}catch(e){}n in t?t[n]instanceof Array?t[n].push(a):t[n]=[t[n],a]:t[n]=/\[\]$/.test(n)?[a]:a}),e?t[e]:t};var res,searchQuery=location.search.queryUrl(),searchFunc=function(e){"use strict";fetch(e).then(function(e){return e.json()}).then(function(e){var t=document.getElementById("search-output"),r=document.getElementById("search-result-num"),n=document.getElementById("search-result-info");void 0!==searchQuery.s&&(!function(a){var s="",c=a.trim().toLowerCase().split(/[\s\-]+/),i=e.length;if(t.innerHTML="",a.trim().length<=0)return;e.forEach(function(e){if(void 0!==e.title&&void 0!==e.content){var t=new Date(e.date).toLocaleDateString(),r=e.url,n=Math.min.apply(void 0,c.map(function(t){return e.content.indexOf(t)}));s+='<div class="tile"><div class="tile-content">';var i=e.title;c.forEach(function(e){var t=new RegExp(e,"gi");i=i.replace(t,"<strong><mark>"+a+"</mark></strong>")}),s+='<a href="'+r+'"><p class="tile-title search-result-title">'+i+"</p></a>",s+='<p class="text-gray search-result-summary">',s+='<span class="saerch-result-date">'+t+"</span>";var o=e.content;if(n>=0){var l=n-10,u=n+10;l<0&&(l=0),0===l&&(u=10),u>o.length&&(u=o.length-10);var h=o.substr(l,u);c.forEach(function(e){var t=new RegExp(e,"gi");h=h.replace(t,"<strong><mark>"+a+"</mark></strong>")}),s+=(0===l?"":"...")+h+"...</p>"}s+="</div></div>"}}),r.innerHTML=i,i<=0?(n.style.display="none",t.innerHTML=window.searchNoResult):(n.style.display="block",t.innerHTML=s)}(searchQuery.s),document.getElementById("search-field").setAttribute("value",searchQuery.s))})};