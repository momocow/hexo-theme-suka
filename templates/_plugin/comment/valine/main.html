{%- from 'helpers/suka_config.html' import suka_config with context -%}
<div id="vcomments"></div>

<script src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
<script>
    var GUEST_INFO = ['nick','mail','link'];
    var guest_info = '{{ suka_config.comment.valine.GUEST_INFO }}'.split(',').filter(function(item){
        return GUEST_INFO.indexOf(item) > -1
    });
    var notify = '{{ suka_config.comment.VALINE_NOTIFY|string|lower }}' === 'true';
    var verify = '{{ suka_config.comment.VALINE_VERIFY|string|lower }}' === 'true';
    new Valine({
        el: '#vcomments',
        notify: notify,
        verify: verify,
        appId: "{{ suka_config.comment.valine.LEANCLOUD_APPID }}",
        appKey: "{{ suka_config.comment.valine.LEANCLOUD_APPKEY }}",
        placeholder: "{{ suka_config.comment.valine.PLACEHOLDER }}",
        meta: guest_info,
        pageSize:'{{ suka_config.comment.valine.PAGE_SIZE }}',
        avatar:'{{ suka_config.comment.valine.AVATAR }}',
        lang:'{{ suka_config.comment.valine.LANG }}',
        guest_info: guest_info,
        visitor: {{ theme.valine_counter.enable }}
    });
</script>
