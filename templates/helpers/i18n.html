{%- set dict = namespace() -%}
{%- set lang = site.language or 'en_US' -%}

{# Fallback: Should be full translated #}
{% include 'i18n/en_US.html' %}

{# Customization: Partial translation is acceptable #}
{% include [ 'custom/i18n/%s.html' % lang, 'i18n/%s.html' % lang ] ignore missing %}

{%- macro i18n(key, default=None) -%}
{{ dict[key|lower|replace('.', '_')] or default or key }}
{%- endmacro -%}